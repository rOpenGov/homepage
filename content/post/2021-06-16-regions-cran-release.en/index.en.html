---
title: "Regions package for Eurostat sub-national statistics"
author: "Daniel Antal, CFA"
date: "2021-06-16"
slug: regions-cran-release
categories:
  - news
  - r-package
tags:
  - open-data
  - open-science
  - regional-data
  - R-bloggers
  - eurostat
output:
  blogdown::html_page:
    highlight: tango
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<p>The new version of our <a href="https://ropengov.org/">rOpenGov</a> R package <a href="https://regions.dataobservatory.eu/">regions</a> was released today on CRAN. This package is one of the engines of our experimental open data-as-service <a href="https://greendeal.dataobservatory.eu/">Green Deal Data Observatory</a>, <a href="https://economy.dataobservatory.eu/">Economy Data Observatory</a>, and <a href="https://music.dataobservatory.eu/">Digital Music Observatory</a> prototypes, which aim to place open data packages into open-source applications.</p>
<p>In international comparison the use of nationally aggregated indicators often have many disadvantages: they inhibit very different levels of homogeneity, and data is often very limited in number of observations for a cross-sectional analysis. When comparing European countries, a few missing cases can limit the cross-section of countries to around 20 cases which disallows the use of many analytical methods.</p>
<p>Working with sub-national statistics has many advantages: the similarity of the aggregation level and high number of observations can allow more precise control of model parameters and errors, and the number of observations grows from 20 to 200-300.</p>
<div class="figure" style="text-align: center"><span id="fig:original-map"></span>
<img src="indicator_with_map.png" alt="The change from national to sub-national level comes with a huge data processing price: internal administrative boundaries, their names, codes codes change very frequently." width="80%" />
<p class="caption">
Figure 1: The change from national to sub-national level comes with a huge data processing price: internal administrative boundaries, their names, codes codes change very frequently.
</p>
</div>
<p>Yet the change from national to sub-national level comes with a huge data processing price. While national boundaries are relatively stable, with only a handful of changes in each recent decade, the change of national boundaries requires a more-or-less global consensus. But states are free to change their internal administrative boundaries, and they do it with high frequency. This means that the names, identification codes and boundary definitions of sub-national regions change very frequently. Joining data from different sources and different years can therefore be very difficult.</p>
<div class="figure" style="text-align: center"><span id="fig:recoded-map"></span>
<img src="recoded_indicator_with_map.png" alt="Our regions R package helps the data processing, validation and imputation of sub-national, regional datasets and their coding." width="80%" />
<p class="caption">
Figure 2: Our regions R package helps the data processing, validation and imputation of sub-national, regional datasets and their coding.
</p>
</div>
<p>There are numerous advantages in switching from a national level of the analysis to a sub-national level. This, however, requires more effort in data processing, validation and imputation. Our <a href="https://regions.dataobservatory.eu/">regions</a> package aims to help in this process.</p>
<p>You can review the problem, and the code that created the two map comparisons, in the <a href="https://regions.dataobservatory.eu/articles/maping.html">Mapping Regional Data, Mapping Metadata Problems</a> vignette article of the package. A more detailed problem description can be found in the <a href="https://regions.dataobservatory.eu/articles/Regional_stats.html">Working With Regional, Sub-National Statistical Products</a> vignette.</p>
<p>This package is an offspring of the <a href="https://ropengov.github.io/eurostat/">eurostat</a> package on <a href="https://ropengov.github.io/">rOpenGov</a>. It started as a tool to validate and re-code regional Eurostat statistics, but it aims to be a general solution for all sub-national statistics. It will be developed parallel with other rOpenGov packages.</p>
<div id="get-the-package" class="section level2">
<h2>Get the Package</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;rOpenGov/regions&quot;</span>)</span></code></pre></div>
<p>or the released version from CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;regions&quot;</span>)</span></code></pre></div>
<p>You can review the complete package documentation on <a href="https://regions.dataobservatory.eu/">regions.dataobservaotry.eu</a>. If you find any problems with the code, please raise an issue on <a href="https://github.com/rOpenGov/regions">Github</a>. Pull requests are welcome if you agree with the <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a></p>
<p>If you use <code>regions</code> in your work, please <a href="https://doi.org/10.5281/zenodo.4965909">cite the package</a>.</p>
</div>

---
title: Hetu-paketti suomalaisten henkilötunnusten käsittelyyn
author: Pyry Kantanen
date: 2020-10-29
slug: "hetu"
categories:
  - R
tags:
  - Finland
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="yleistä" class="section level2">
<h2>Yleistä</h2>
<p>Hetu-paketti on tarkoitettu suomalaisten henkilötunnusten algoritmiseen käsittelyyn. Paketista on erityisesti hyötyä, mikäli halutaan poimia informaatiota suuresta määrästä henkilötunnuksia, kuten tunnuksen haltijoiden iät tai sukupuolet. Henkilötunnusten käsittelyyn tarkoitettujen työkalujen kehitystyö alkoi osana sorvi-pakettia, mutta ne eriytettiin omaksi paketikseen vuonna 2013. Syksyllä 2020 hetu-paketti saatettiin julkaisukelpoiseen kuntoon ja se on saatavissa <a href="https://CRAN.R-project.org/package=hetu">CRANista</a>.</p>
<p>Hetu-paketin esikuvana on toiminut <a href="https://CRAN.R-project.org/package=sweidnumbr">sweidnumbr-paketti</a> ja pakettien käyttämät funktiot on mahdollisuuksien mukaan nimetty samalla tavalla.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div id="suomalainen-henkilötunnus" class="section level2">
<h2>Suomalainen henkilötunnus</h2>
<p>Henkilötunnus on henkilöiden yksilöintiin tarkoitettu tunnus, joka koostuu syntymäajasta (PP/KK/VV), syntymävuosisataa kuvaavasta merkistä (-, + tai A), yksilönumerosta (NNN) sekä tarkistusmerkistä (C). Käytännössä henkilötunnuksen yksilönumeron avulla pystytään pystytään erottamaan toisistaan samana päivänä syntyneet henkilöt sekä tehdä päätelmiä henkilön sukupuolesta. Naisilla numero on parillinen ja miehillä pariton.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>Henkilötunnusta käytetään laajalti julkisella ja yksityisellä sektorilla. Henkilötunnus toimii usein sen yksilöivyyden vuoksi rekisteritietokannoissa ns. avaimena, jonka avulla rekistereiden sisältämät tietotaulut pystytään yhdistämään tiettyyn käyttäjään ja toisaalta eri rekistereistä löytyvää dataa voidaan yhdistellä toisiinsa.</p>
<p>Henkilötunnus ei sinänsä ole salassapidettävää tietoa, mutta sen, kuten muidenkin henkilötietojen, käsittelyyn liittyy rajoituksia: henkilötunnusta saa käsitellä rekisteröidyn yksiselitteisesti antamalla suostumuksella tai mikäli rekisteröidyn yksiselitteinen yksilöiminen on tärkeää.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Rajoitukset eivät todennäköisesti ole täysin aiheettomia, sillä henkilötunnusten käyttö ei ole täysin ongelmatonta. Tähän palataan blogin loppupuolella.</p>
</div>
<div id="henkilötunnusten-algoritminen-käsittely-hetu-paketilla" class="section level2">
<h2>Henkilötunnusten algoritminen käsittely hetu-paketilla</h2>
<p>Henkilötunnusten sisältämän tiedon käsittely onnistuu melko hyvin ilman mitään apuvälineitä. Syntymäajan ja sukupuolen määrittämiseksi ei tarvitse suorittaa minkäänlaisia laskutoimituksia ja henkilötunnuksen muodon oikeellisuuden arviointi, etenkin päivämäärän, pituuden ja yksilönumeron osalta, onnistuu hyvin silmämääräisestikin. Tarkistusmerkin tarkistaminen ja laskeminen vaatii enemmän vaivaa ja todennäköisesti myös laskimen, kynää ja paperia. Tehtävä on kuitenkin suoritettavissa.</p>
<p>Hetu-paketin suurin hyöty liittyy luonnollisesti tilanteisiin, joissa käsiteltäviä henkilötunnuksia on suuri määrä. Paketin sisältämien funktioiden avulla jopa miljoonista henkilötunnuksista voidaan helposti ja nopeasti poimia seuraavat tiedot:</p>
<ul>
<li>hetu_date / pin_date: syntymäaika</li>
<li>hetu_sex / pin_sex: sukupuoli, Male tai Female</li>
<li>hetu_age / pin_age: ikä vuosina, kuukausina tai päivinä (kysymishetkellä tai haluttuna ajankohtana)</li>
<li>hetu_ctrl / pin_ctrl: henkilötunnuksen validius, TRUE tai FALSE</li>
</ul>
<p>Henkilötunnuksen oikeellisuus määräytyy sen yksittäisten osien oikeellisuuden perusteella. Jos yksikin henkilötunnuksen osa on vääränlainen (esimerkiksi päivämäärä on muotoa 30/02/01 tai yksilönumero on 000 tai 001), henkilötunnuksessa on jonkinlainen virhe ja sen sisältämien tietojen luotettavuudesta ei voida olla varmoja. Käyttäjä voi halutessaan tulostaa hetu_diagnostic -funktiota käyttämällä diagnostisia tietoja henkilötunnusten yksittäisten osien, kuten päivämäärän, vuosisadan merkin, yksilönumeron, tarkistenumeron, tunnuksen pituuden ym. oikeellisuudesta.</p>
<p>Hetu-paketti mahdollistaa satunnaisesti muodostettujen, tietylle aikavälille osuvien henkilötunnusten generoimisen rhetu-funktiolla. Paketin toiminnallisuuksien testaaminen onnistuu helposti ilman oikeilta ihmisiltä kerättyä aineistoa. Rhetu-funktio mahdollistaa myös ns. keinotekoisten tai väliaikaisten hetujen generoimisen. Keinotekoisia henkilötunnuksia on toisinaan myönnetty organisaatiokohtaisesti henkilöille, joilla ei ole ollut pysyvää suomalaista henkilötunnusta tai joiden henkilöllisyyttä ei ole pystytty varmentamaan. Keinotekoiset henkilötunnukset eroavat varsinaisista henkilötunnuksista siten, että niiden yksilönumero on välillä 900-999. Keinotekoisten henkilötunnusten generoiminen saattaa olla hyödyllistä, mikäli halutaan varmistua että aineistossa ei vahingossakaan ole aitoja henkilötunnuksia.</p>
<p>Henkilötunnuksesta poimittua tietoa voidaan käyttää myös validoimaan ihmisten itse ilmoittamaa tietoa. Rhetu-funktio tuottaa pelkästään valideja henkilötunnuksia, mutta todellisessa aineistossa henkilötunnuksen kirjaamisessa tai tallentamisessa on saattanut tapahtua näppäily- tai lukuvirheitä. Hetu-pakettia voidaankin käyttää validoimaan ihmisistä tallennettujen tietojen laatua tai tehdä vertailua käyttäjien ilmoittamien syntymäaikojen ja henkilötunnuksen syntymäajan välillä.</p>
<p>Suomalaisen henkilötunnuksen tarkistusmerkki on erilaisten lyöntivirheiden kannalta vikaherkkä. Esimerkiksi päivien, kuukausien ja vuosien järjestyksen vaihtuminen tai päivämäärän väärin merkitsemisen tarkistusmerkin pysyessä samana saa sen, että henkilötunnus ei enää mene läpi tarkistuksessa. Esimerkiksi ruotsalaisen henkilötunnuksen tapauksessa päivien ja kuukausien järjestyksen vaihtuminen ei vaikuta tarkistusmerkin laskentaan.</p>
<div id="käytännön-esimerkkejä" class="section level3">
<h3>Käytännön esimerkkejä</h3>
<p>Paketin asentaminen R-ympäristöön:</p>
<pre class="r"><code>install.packages(&quot;hetu&quot;)</code></pre>
<p>Paketin lataaminen kirjastoon ja 2 yksikön pituisen esimerkkivektorin asettaminen onnistuu seuraavanlaisesti:</p>
<pre class="r"><code>library(hetu)
example_pins &lt;- c(&quot;010101-0101&quot;, &quot;111111-111C&quot;)</code></pre>
<p>Perustietojen tarkastelu hetuja sisältävästä vektorista onnistuu yksinkertaisesti hetu-komennolla, joka tulostaa perusmuodossa data frame -tyyppisen taulukon. Taulukko on tässä esimerkissä muotoiltu hieman kauniimmaksi kable-funktiolla:</p>
<pre class="r"><code>knitr::kable(hetu(example_pins))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">hetu</th>
<th align="left">sex</th>
<th align="left">p.num</th>
<th align="left">checksum</th>
<th align="left">date</th>
<th align="right">day</th>
<th align="right">month</th>
<th align="right">year</th>
<th align="left">century</th>
<th align="left">valid.pin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">010101-0101</td>
<td align="left">Female</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">1901-01-01</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1901</td>
<td align="left">-</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">111111-111C</td>
<td align="left">Male</td>
<td align="left">111</td>
<td align="left">C</td>
<td align="left">1911-11-11</td>
<td align="right">11</td>
<td align="right">11</td>
<td align="right">1911</td>
<td align="left">-</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<p>Taulukon sisältämien tietojen, erityisesti sukupuolen ja päivämäärän, tarkastelu onnistuu joko hetu-funktion extract-parametrin avulla tai siihen erikoistuneiden funktioiden avulla:</p>
<pre class="r"><code>example_pins &lt;- c(&quot;010101-0101&quot;, &quot;111111-111C&quot;)
# Hetujen omistajien sukupuolen poiminta
hetu(example_pins, extract = &quot;sex&quot;)</code></pre>
<pre><code>## [1] &quot;Female&quot; &quot;Male&quot;</code></pre>
<pre class="r"><code>hetu_sex(example_pins)</code></pre>
<pre><code>## [1] &quot;Female&quot; &quot;Male&quot;</code></pre>
<pre class="r"><code># Hetujen sisältämän päivämäärän poimiminen
hetu(example_pins, extract = &quot;date&quot;)</code></pre>
<pre><code>## [1] &quot;1901-01-01&quot; &quot;1911-11-11&quot;</code></pre>
<pre class="r"><code>hetu_date(example_pins)</code></pre>
<pre><code>## [1] &quot;1901-01-01&quot; &quot;1911-11-11&quot;</code></pre>
<pre class="r"><code># Hetujen oikeellisuuden tarkistus
hetu(example_pins, extract = &quot;valid.pin&quot;)</code></pre>
<pre><code>## [1] TRUE TRUE</code></pre>
<pre class="r"><code>hetu_ctrl(example_pins)</code></pre>
<pre><code>## [1] TRUE TRUE</code></pre>
<pre class="r"><code># Esimerkki tiedosta, jolle ei löydy erikoistunutta funktiota
hetu(example_pins, extract = &quot;p.num&quot;)</code></pre>
<pre><code>## [1] &quot;010&quot; &quot;111&quot;</code></pre>
<p>Muista tiedoista poiketen ikää ei saa suoraan poimittua hetu-funktion extract-parametria käyttämällä. Ikä halutussa aikamääreessä ja haluttuna ajankohtana saadaan hetu_age-funktion avulla. Perusasetus on ikä vuosina kysymisajankohtana, mutta myös ikä kuukausina tai päivinä on mahdollinen.</p>
<p>Tässä esimerkissä käytetään myös rhetu-funktiota, jonka avulla voidaan generoida haluttu määrä keinotekoisia henkilötunnuksia esimerkiksi paketin ominaisuuksien testaamiseksi.</p>
<pre class="r"><code>example_pins2 &lt;- rhetu(5, start = &quot;1950-01-01&quot;, end = &quot;1995-05-07&quot;)
# Ikä vuosina
hetu_age(example_pins2)</code></pre>
<pre><code>## The age in years has been calculated at 2020-10-29.</code></pre>
<pre><code>## [1] 65 69 67 60 44</code></pre>
<pre class="r"><code># Ikä kuukasina
hetu_age(example_pins2, timespan = &quot;months&quot;)</code></pre>
<pre><code>## The age in months has been calculated at 2020-10-29.</code></pre>
<pre><code>## [1] 784 832 812 728 533</code></pre>
<pre class="r"><code># Minkä ikäisiä hetujen omistajat olivat 2011 puolivälissä?
hetu_age(example_pins2, date = &quot;2011-01-01&quot;)</code></pre>
<pre><code>## The age in years has been calculated at 2011-01-01.</code></pre>
<pre><code>## [1] 55 59 57 50 34</code></pre>
<pre class="r"><code># Visualisointi: laatikkojanakuvaaja sukupuolen mukaan ryhmiteltynä
example_pins3 &lt;- rhetu(20, start = &quot;1950-01-01&quot;, end = &quot;1995-05-07&quot;, p.male = 0.5)
boxplot(hetu_age(example_pins3)~hetu_sex(example_pins3), xlab = &quot;&quot;, ylab = &quot;Ikä vuosina&quot;, col=c(&quot;gold&quot;, &quot;darkgreen&quot;))</code></pre>
<pre><code>## The age in years has been calculated at 2020-10-29.</code></pre>
<p><img src="/post/2020-10-29-hetu.fi_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Joissakin tapauksissa voi olla hyödyllistä tarkastella epävalidien hetujen diagnostiikkatietoa. Tiedot saadaan hetu_diagnostic -funktion avulla, jota demonstroimme monella tavalla virheellisen henkilötunnuksen avulla:</p>
<pre class="r"><code>hetu_diagnostic(&quot;321399-000G&quot;)</code></pre>
<pre><code>##           hetu is.temp valid.p.num valid.checksum correct.checksum valid.date
## 21 321399-000G   FALSE       FALSE          FALSE            FALSE      FALSE
##    valid.day valid.month valid.year valid.length valid.century
## 21     FALSE       FALSE       TRUE         TRUE          TRUE</code></pre>
<pre class="r"><code># Tulosta ainoastaan halutut sarakkeet
hetu_diagnostic(&quot;321399-000G&quot;, extract = c(&quot;valid.p.num&quot;, &quot;valid.length&quot;))</code></pre>
<pre><code>##           hetu valid.p.num valid.length
## 21 321399-000G       FALSE         TRUE</code></pre>
</div>
</div>
<div id="yritys--ja-yhteisötunnusten-y-tunnus-käsittely" class="section level2">
<h2>Yritys- ja yhteisötunnusten (Y-tunnus) käsittely</h2>
<p>Hetu-paketissa on myös sweidnumbr-pakettia vastaavalla tavalla mahdollisuus generoida ja validoida suomalaisia yritys- ja yhteisötunnuksia. Suomalainen Y-tunnus koostuu seitsemästä numerosta, väliviivasta ja tarkistusmerkistä ja on muotoa 1234567-8.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Y-tunnus on englanniksi Business Identity Code, mistä johtuen tässä paketissa y-tunnusten käsittelyyn tarkoitettujen funktioiden etuliitteenä käytetään lyhennettä bid:</p>
<ul>
<li>bid_ctrl(bid): tarkastaa y-tunnuksen oikeellisuuden, TRUE tai FALSE</li>
<li>rbid(n): generoi n kappaletta y-tunnuksia</li>
</ul>
<pre class="r"><code>example_bids &lt;- rbid(2)
example_bids</code></pre>
<pre><code>## [1] &quot;6212259-9&quot; &quot;9081082-3&quot;</code></pre>
<pre class="r"><code>bid_ctrl(example_bids)</code></pre>
<pre><code>## [1] TRUE TRUE</code></pre>
<p>Toisin kuin henkilötunnusten tapauksessa, y-tunnuksista ei voida poimia mitään muuta lisäinformaatiota, esimerkiksi yrityksen perustamisajankohtaan tai toimialaan liittyen.</p>
</div>
<div id="henkilötunnusten-tulevaisuus-ja-tietoturvallisuus" class="section level2">
<h2>Henkilötunnusten tulevaisuus ja tietoturvallisuus</h2>
<p>Henkilötunnusten uudistamisesta on käyty viime vuosina runsaasti julkista keskustelua. Nykymuotoisen henkilötunnuksen ongelmana on pidetty esimerkiksi henkilötunnusten rajallista määrää sekä sitä, että henkilötunnuksesta ilmenee henkilötietoja kuten sukupuoli ja ikä. Toisaalta uudistusta vastaan puhuu julkisen ja yksityisen sektorin toimijoiden tietojärjestelmien päivitysten korkeat kustannukset. Kirjoitushetkellä tuoreimman ehdotuksen mukaan henkilötunnukset olisivat säilymässä tulevaisuudessakin muodoltaan nykyisiä vastaavina sillä erotuksella, että jatkossa vapaana olevat parilliset ja parittomat yksilönumerot jaettaisiin tasaisesti molemmille sukupuolille.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> <a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>Tietosuojaperiaatteen mukaan henkilötietoja tulisi kerätä ja käsitellä ainoastaan siinä laajuudessa, mikä on tarkoituksenmukaista tai välttämätöntä palvelun käyttötarkoituksen kannalta.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> Tätä taustaa vasten voidaan pitää ongelmallisena, että henkilötunnusten laajamittainen käyttö aiheuttaa vähintäänkin epäsuorasti tilanteen, jossa palvelun tarjoajalla on usein tarpeettomasti hallussaan tietoa käyttäjien iästä ja sukupuolesta.</p>
<p>Käytännössä suuremmat ongelmat koituvat ihmisille kuitenkin tavasta, jolla henkilötunnuksia käytetään suomalaisessa yhteiskunnassa. Vaikka henkilötunnus ei teoriassa ole salassapidettävää tietoa, rikollisella tai muutoin vilpillisellä tavalla toimiva henkilö voi aiheuttaa monenlaista haittaa, mikäli hän saa haltuunsa toisen ihmisen henkilötunnuksen. Henkilötunnusta saatetaan kysyä puhelimitse asioivalta henkilöltä varmistukseksi henkilöllisyydestä, ennen kuin hänelle kerrotaan esimerkiksi sensitiivisiä potilastietoja. Joskus henkilötunnus saatetaan asettaa verkkopalvelussa uuden käyttäjän ensimmäiseksi salasanaksi, joka jokaisen pitäisi muistaa vaihtaa ensimmäisen kirjautumiskerran jälkeen. Henkilötunnuksen ja ihmisen nimen tietäminen voivat joissakin tapauksissa riittää siihen, että rikollisesti toimiva voi tilata osamaksulla tuotteita, joita hänellä ei ole aikomustakaan maksaa.</p>
</div>
<div id="lähdeviitteet" class="section level2">
<h2>Lähdeviitteet</h2>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Lisätietoja sweidnumbr-paketista esim. tästä blogikirjoituksesta: Magnusson, Måns &amp; Bülow, Erik. 2015. R made personal (at least for swedes)!. URL: <a href="http://ropengov.org/2015/08/r-made-personal-at-least-for-swedes/" class="uri">http://ropengov.org/2015/08/r-made-personal-at-least-for-swedes/</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Digi- ja väestötietovirasto. Henkilötunnus. URL: <a href="https://dvv.fi/henkilotunnus" class="uri">https://dvv.fi/henkilotunnus</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Ks. esim. Finlex. HE 59/2013. URL: <a href="https://www.finlex.fi/fi/esitykset/he/2013/20130059" class="uri">https://www.finlex.fi/fi/esitykset/he/2013/20130059</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Yritys- ja yhteisötietojärjestelmä. Y-tunnus. URL: <a href="https://www.ytj.fi/index/y-tunnus.html" class="uri">https://www.ytj.fi/index/y-tunnus.html</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>Tuomas Salsteen nettisivuilta löytyy hyvä selvitys henkilötunnuksen historiasta, ongelmakohdista että uudistustyöryhmän kehitysehdotuksista. URL: <a href="https://www.tuomas.salste.net/doc/hetu/tunnus.html" class="uri">https://www.tuomas.salste.net/doc/hetu/tunnus.html</a>.<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Yle Uutiset. 2020. Uusi henkilötunnus kaikille Suomen kansalaisille ja Suomessa asuville, ehdottaa työryhmä – jatkossa tunnuksesta ei selviäisi ikä, syntymäaika tai sukupuoli. Julkaistu 8.4.2020, viitattu 23.10.2020. URL: <a href="https://yle.fi/uutiset/3-11299218" class="uri">https://yle.fi/uutiset/3-11299218</a><a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Tietosuojavaltuutetun toimisto. Käyttötarkoitussidonnaisuus. Viitattu 26.10.2020. <a href="https://tietosuoja.fi/kayttotarkoitussidonnaisuus" class="uri">https://tietosuoja.fi/kayttotarkoitussidonnaisuus</a><a href="#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
